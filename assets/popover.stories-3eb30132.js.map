{"version":3,"file":"popover.stories-3eb30132.js","sources":["../../../../libs/ui/src/popover/hooks/use-popover-animation.ts","../../../../libs/ui/src/popover/ui/popover.styles.tsx","../../../../libs/ui/src/popover/ui/popover.tsx"],"sourcesContent":["import { useAnimations } from '$/client-shared'\nimport { VoidFunction } from '$/client-shared'\n\nexport const usePopoverAnimation = (\n  closeCallback: VoidFunction,\n  height: number\n) => {\n  const { Spring, Gesture } = useAnimations()\n  const [{ y }, api] = Spring.useSpring(() => ({ y: height }))\n\n  const open = () => {\n    api.start({ y: 0, immediate: false, config: Spring.config.gentle })\n  }\n\n  const close = (velocity = 0) => {\n    closeCallback()\n    api.start({\n      y: height,\n      immediate: false,\n      config: { ...Spring.config.stiff, velocity }\n    })\n  }\n\n  const bind = Gesture.useDrag(\n    ({ last, velocity: [, vy], direction: [, dy], offset: [, oy], cancel }) => {\n      if (oy < -70) cancel()\n      if (last) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        oy > height * 0.5 || (vy > 0.5 && dy === 1) ? close(vy) : open()\n      } else api.start({ y: oy, immediate: dy === -1 })\n    },\n    {\n      from: () => [0, y.get()],\n      filterTaps: true,\n      bounds: { top: 0 },\n      rubberband: true\n    }\n  )\n\n  const display = y.to((py) => (py < height ? 'block' : 'none'))\n\n  const toggle = (isOpened: boolean) => {\n    if (isOpened) {\n      open()\n    } else {\n      close()\n    }\n  }\n\n  return {\n    toggle,\n    bind,\n    div: Spring.a.div,\n    springs: {\n      display,\n      y\n    }\n  }\n}\n","import styled from 'styled-components'\n\nimport { color, customScrollbar } from '$/styles'\n\ninterface PopoverStylesProps {\n  readonly $bottom: number\n}\n\nexport const PopoverStyles = styled.div<PopoverStylesProps>`\n  padding-left: 15px;\n  z-index: 15;\n  position: fixed;\n  right: 0;\n  height: calc(100vh + 100px);\n  width: calc(100% - 54px);\n  border-radius: 6px 6px 0;\n  background: ${color('darkBlue')};\n  border-top: 2px solid ${color('lightGrey')};\n  touch-action: none;\n  bottom: ${({ $bottom }) => `calc(-100vh + ${$bottom - 100}px)`};\n  overflow-y: auto;\n  box-sizing: border-box;\n  scroll-behavior: smooth;\n  ${customScrollbar()};\n`\n","import { useEffect } from 'react'\n\nimport { AnimationProvider } from '$/client-shared'\nimport { VoidFunction, WithChildren } from '$/client-shared'\nimport { usePopoverAnimation } from '../hooks'\n\nimport { PopoverStyles } from './popover.styles'\n\nexport type PopoverProps = WithChildren<{\n  onClose: VoidFunction\n  isOpen: boolean\n  height: number\n}>\n\nexport const Popover = ({\n  children,\n  onClose,\n  isOpen,\n  height\n}: PopoverProps) => {\n  const motion = usePopoverAnimation(onClose, height)\n\n  useEffect(() => {\n    motion.toggle(isOpen)\n  }, [isOpen])\n\n  return (\n    <PopoverStyles\n      $bottom={height}\n      {...motion.bind()}\n      style={motion.springs}\n      as={motion.div}>\n      {children}\n    </PopoverStyles>\n  )\n}\n\nexport default (props: PopoverProps) => {\n  return (\n    <AnimationProvider>\n      <Popover {...props} />\n    </AnimationProvider>\n  )\n}\n"],"names":["usePopoverAnimation","closeCallback","height","Spring","Gesture","useAnimations","y","api","open","close","velocity","bind","last","vy","dy","oy","cancel","display","py","isOpened","PopoverStyles","styled","color","$bottom","customScrollbar","Popover","children","onClose","isOpen","motion","useEffect","jsx"],"mappings":"uWAGa,MAAAA,EAAsB,CACjCC,EACAC,IACG,CACH,KAAM,CAAE,OAAAC,EAAQ,QAAAC,CAAQ,EAAIC,EAAc,EACpC,CAAC,CAAE,EAAAC,GAAKC,CAAG,EAAIJ,EAAO,UAAU,KAAO,CAAE,EAAGD,CAAA,EAAS,EAErDM,EAAO,IAAM,CACbD,EAAA,MAAM,CAAE,EAAG,EAAG,UAAW,GAAO,OAAQJ,EAAO,OAAO,MAAQ,CAAA,CAAA,EAG9DM,EAAQ,CAACC,EAAW,IAAM,CAChBT,IACdM,EAAI,MAAM,CACR,EAAGL,EACH,UAAW,GACX,OAAQ,CAAE,GAAGC,EAAO,OAAO,MAAO,SAAAO,CAAS,CAAA,CAC5C,CAAA,EAGGC,EAAOP,EAAQ,QACnB,CAAC,CAAE,KAAAQ,EAAM,SAAU,CAAG,CAAAC,CAAE,EAAG,UAAW,EAAGC,CAAE,EAAG,OAAQ,CAAA,CAAGC,CAAE,EAAG,OAAAC,KAAa,CACrED,EAAK,KAAYC,IACjBJ,EAEGG,EAAAb,EAAS,IAAQW,EAAK,IAAOC,IAAO,EAAKL,EAAMI,CAAE,EAAIL,EAAK,EAC1DD,EAAI,MAAM,CAAE,EAAGQ,EAAI,UAAWD,IAAO,GAAI,CAClD,EACA,CACE,KAAM,IAAM,CAAC,EAAGR,EAAE,KAAK,EACvB,WAAY,GACZ,OAAQ,CAAE,IAAK,CAAE,EACjB,WAAY,EACd,CAAA,EAGIW,EAAUX,EAAE,GAAIY,GAAQA,EAAKhB,EAAS,QAAU,MAAO,EAUtD,MAAA,CACL,OATciB,GAAsB,CAChCA,EACGX,IAECC,GACR,EAKA,KAAAE,EACA,IAAKR,EAAO,EAAE,IACd,QAAS,CACP,QAAAc,EACA,EAAAX,CACF,CAAA,CAEJ,EClDOc,EAAAC,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAA6BC,EAAA,UAAA,CAAA;AAAA,0BAQHA,EAAA,WAAA,CAAA;AAAA;AAAA,YACW,CAAA,CAAA,QAAAC,KAAA,iBAAAA,EAAA,GAAA,KAAA;AAAA;AAAA;AAAA;AAAA,IAEoBC,EAAA,CAAA;AAAA,wjBCLzD,MAAAC,EAAA,CAAA,CAAiB,SAAAC,EACtB,QAAAC,EACA,OAAAC,EACA,OAAA1B,CAEF,IAAA,CACE,MAAA2B,EAAA7B,EAAA2B,EAAAzB,CAAA,EAEA4B,OAAAA,EAAAA,UAAA,IAAA,CACED,EAAA,OAAAD,CAAA,CAAoB,EAAA,CAAAA,CAAA,CAAA,EAGtBG,EAAA,IACEX,EAAC,CAAA,QAAAlB,EACU,GAAA2B,EAAA,KAAA,EACO,MAAAA,EAAA,QACF,GAAAA,EAAA,IACH,SAAAH,CACV,CAAA,CAGP"}